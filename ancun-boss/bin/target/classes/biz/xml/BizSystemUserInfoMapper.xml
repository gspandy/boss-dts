<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ancun.boss.persistence.biz.BizSystemUserInfoMapper">
    <resultMap id="BaseResultMap" type="com.ancun.boss.pojo.userInfo.UserInfoPojo">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="USERNO" property="userno" jdbcType="VARCHAR"/>
        <result column="USERNAME" property="username" jdbcType="VARCHAR"/>
        <result column="EMAIL" property="email" jdbcType="VARCHAR"/>
        <result column="SPELL" property="spell" jdbcType="VARCHAR"/>
        <result column="JOB" property="job" jdbcType="VARCHAR"/>
        <result column="NAME" property="orgname" jdbcType="VARCHAR"/>
    </resultMap>

    <select id="selectUserList" parameterType="com.ancun.boss.pojo.userInfo.UserInfoListInput"
            resultMap="BaseResultMap">
        SELECT DISTINCT t1.USERNO, t1.USERNAME, t1.EMAIL, t1.SPELL, t1.JOB, t2.NAME
        FROM
        SYSTEM_USER_INFO t1
        LEFT JOIN SYSTEM_BASIC_CONFIG t2 ON t1.ORGNO = t2.CODE
        WHERE t1.DELETED='NO'
        AND t2.MOUDLECODE = 'ORG'
        <if test="jobno != null and jobno !=''">
            AND t1.USERNO LIKE CONCAT('%',#{jobno,jdbcType=VARCHAR},'%' )
        </if>
        <if test="username != null and username !=''">
            AND t1.USERNAME like CONCAT('%',#{username,jdbcType=VARCHAR},'%' )
        </if>
        <if test="orgno != null and orgno !=''">
            AND t1.ORGNO = #{orgno,jdbcType=VARCHAR}
        </if>
        <if test="job !=null and job !=''">
            AND t1.JOB like CONCAT('%',#{job,jdbcType=VARCHAR},'%' )
        </if>
        ORDER BY t1.USERNO DESC
    </select>
  
    <select id="selectUser" parameterType="java.lang.String" resultMap="BaseResultMap">
    SELECT DISTINCT t1.USERNO, t1.PWD, t1.USERNAME, t1.ORGNO, t1.CONTACTPHONE, t1.EMAIL,  t1.REMARK,
        t1.DELETED, t1.DATAPERMISSION, t1.LOGINTIME, t1.ERRTIMES, t1.SPELL, t1.JOB, t2.NAME
    FROM
        SYSTEM_USER_INFO t1
    LEFT JOIN SYSTEM_BASIC_CONFIG t2 ON t1.ORGNO = t2.CODE
    WHERE t2.MOUDLECODE = 'ORG'
        AND USERNO = #{userNo,jdbcType=VARCHAR}
  </select>

</mapper>