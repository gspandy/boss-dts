<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ancun.boss.persistence.biz.BizImportFailedRecordMapper" >
  <resultMap id="BaseResultMap" type="com.ancun.boss.pojo.importfailed.ImportFailedRecordGetInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" property="id" jdbcType="BIGINT" />
    <result column="MENUNO" property="menuno" jdbcType="VARCHAR" />
    <result column="MENUNAME" property="menuname" jdbcType="VARCHAR" />
    <result column="FUNCNAME" property="funcname" jdbcType="VARCHAR" />
    <result column="IMPORT_TIME" property="importTime" jdbcType="VARCHAR" />
    <result column="FAILED_REMARK" property="failedRemark" jdbcType="VARCHAR" />
    <result column="USERNO" property="userno" jdbcType="VARCHAR" />
    <!-- <result column="MENUNAMES" property="menunames" jdbcType="VARCHAR" /> -->
  </resultMap>
  <select id="queryImportFailedList" parameterType="com.ancun.boss.pojo.importfailed.ImportFailedRecordGetInput"
            resultMap="BaseResultMap">        
        SELECT DISTINCT ID,MENUNO, MENUNAME, FUNCNAME, IMPORT_TIME, FAILED_REMARK, USERNO
        FROM
        IMPORT_FAILED_RECORD 
        where 1=1
        
        <if test="menuname != null and menuname !=''">
            AND MENUNAME = #{menuname,jdbcType=VARCHAR}
        </if>
        <if test="funcname != null and funcname !=''">
            AND FUNCNAME = #{funcname,jdbcType=VARCHAR}
        </if>
        <if test="importTimeStart != null and importTimeStart !=''" >
            AND IMPORT_TIME &gt;= #{importTimeStart,jdbcType=VARCHAR}
        </if>
        <if test="importTimeEnd !=null and importTimeEnd !=''">
            AND IMPORT_TIME &lt;= date_add(#{importTimeEnd,jdbcType=VARCHAR}, INTERVAL 1 day)
        </if>
        ORDER BY ID DESC
    </select>
</mapper>
